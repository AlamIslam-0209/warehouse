<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Visualisasi C: Gudang Interactive</title>
    <style>
        :root {
            --bg: #0f172a;
            --panel: #1e293b;
            --text: #e2e8f0;
            --accent: #3b82f6;
            --yellow: #f59e0b;
            --red: #ef4444;
            --green: #10b981;
        }

        * { box-sizing: border-box; }

        body {
            font-family: 'Segoe UI', Tahoma, sans-serif;
            background: var(--bg);
            color: var(--text);
            margin: 0;
            display: flex;
            height: 100vh;
            overflow: hidden;
        }

        /* --- LAYOUT RESPONSIVE --- */
        /* Default (Laptop) */
        .left {
            width: 35%;
            background: var(--panel);
            border-right: 1px solid #334155;
            display: flex;
            flex-direction: column;
            padding: 25px; /* Sedikit lebih lega */
            overflow-y: auto;
            z-index: 10;
        }
        .right {
            width: 65%;
            position: relative;
            background-image: radial-gradient(#334155 1px, transparent 1px);
            background-size: 20px 20px;
            display: flex;
            flex-direction: column;
        }

        /* Mobile Layout */
        @media (max-width: 768px) {
            body { flex-direction: column; }
            .left {
                width: 100%;
                height: 55vh; /* Panel teks lebih tinggi biar muat penjelasan panjang */
                border-right: none;
                border-bottom: 2px solid var(--accent);
                padding: 15px;
            }
            .right {
                width: 100%;
                height: 45vh;
            }
            h2 { font-size: 1.2rem; }
            .code-block { font-size: 0.75rem; padding: 10px; }
        }

        /* --- STYLING KONTEN --- */
        h2 { color: var(--accent); margin-top: 0; margin-bottom: 10px; font-size: 1.5rem; }
        
        /* Typography Penjelasan Diperbaiki */
        p { 
            line-height: 1.6; 
            font-size: 1rem; 
            color: #cbd5e1; 
            margin-bottom: 20px; 
            text-align: justify; /* Agar teks panjang rapi */
        }
        
        /* Highlight text di dalam penjelasan */
        strong { color: var(--yellow); }

        .code-block {
            background: #000;
            padding: 15px;
            border-radius: 6px;
            font-family: 'Consolas', monospace;
            font-size: 0.85rem;
            color: #d4d4d4;
            border-left: 3px solid var(--yellow);
            white-space: pre-wrap;
            margin-bottom: 15px;
            overflow-x: auto;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
        }
        
        /* Syntax Colors */
        .k { color: #569cd6; font-weight: bold; } 
        .t { color: #4ec9b0; } 
        .s { color: #ce9178; } 
        .c { color: #6a9955; font-style: italic; } 

        .nav {
            margin-top: auto;
            display: flex;
            gap: 10px;
            padding-top: 10px;
        }
        button {
            flex: 1; padding: 12px; border: none; border-radius: 6px;
            font-weight: bold; cursor: pointer; transition: 0.2s;
            background: #334155; color: white;
            font-size: 1rem;
        }
        button.next { background: var(--accent); }
        button:active { transform: scale(0.95); }

        /* --- STYLING VISUALISASI --- */
        .stage {
            flex: 1;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            perspective: 1000px; 
        }

        .terminal {
            height: 120px;
            background: #111;
            border-top: 2px solid #333;
            padding: 10px;
            font-family: 'Consolas', monospace;
            color: var(--green);
            overflow-y: auto;
            font-size: 0.8rem;
            flex-shrink: 0;
        }

        /* Elemen Animasi */
        .box {
            padding: 8px 12px;
            background: #1e293b;
            border: 2px solid #555;
            border-radius: 6px;
            position: absolute;
            text-align: center;
            font-weight: bold;
            font-size: 0.9rem;
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            color: white;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }
        
        .label {
            font-size: 0.6rem; color: #999; margin-bottom: 4px; text-transform: uppercase; letter-spacing: 1px;
        }

        /* Classes Khusus Animasi */
        .anim-pop { animation: popIn 0.5s forwards; }
        .anim-slide-in { animation: slideInRight 0.5s forwards; }
        
        @keyframes popIn { from { transform: scale(0); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        @keyframes slideInRight { from { transform: translateX(100px); opacity: 0; } to { transform: translateX(0); opacity: 1; } }

        /* Array Container untuk Demo */
        .array-rack {
            display: flex; gap: 5px;
            background: rgba(255,255,255,0.05);
            padding: 10px; border-radius: 10px;
            border: 1px dashed #555;
        }
        .rack-slot {
            width: 70px; height: 90px;
            border: 2px solid #444;
            border-radius: 6px;
            display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            font-size: 0.7rem; color: #666;
            position: relative;
        }
        .rack-item {
            width: 90%; height: 80%;
            background: var(--accent);
            border-radius: 4px;
            color: white;
            display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            font-size: 0.8rem;
            box-shadow: 0 0 10px var(--accent);
            z-index: 2;
        }

    </style>
</head>
<body>

    <div class="left">
        <div style="font-size:0.7rem; color:#666; margin-bottom:5px; font-weight:bold;">
            SLIDE <span id="s-num">1</span> / <span id="s-total">20</span>
        </div>
        <h2 id="title">Judul</h2>
        <div id="desc">Deskripsi</div>
        <div id="code" class="code-block"></div>
        <div class="nav">
            <button class="prev" onclick="move(-1)">Back</button>
            <button class="next" onclick="move(1)">Next</button>
        </div>
    </div>

    <div class="right">
        <div class="stage" id="stage"></div>
        <div class="terminal" id="term">>_</div>
    </div>

<script>
    // --- ANIMATION ENGINE (Sama Persis - Tidak Berubah) ---
    let timers = []; 
    
    function wait(fn, ms) {
        const t = setTimeout(fn, ms);
        timers.push(t);
        return t;
    }

    function loop(fn, ms) {
        const t = setInterval(fn, ms);
        timers.push(t);
        return t;
    }

    function cleanup() {
        timers.forEach(t => {
            clearTimeout(t);
            clearInterval(t);
        });
        timers = [];
        document.getElementById('stage').innerHTML = ""; 
    }

    // --- DATABASE SLIDE (PENJELASAN DIPERPANJANG UNTUK PEMULA) ---
    const slides = [
        {
            t: "1. Masalah: Data yang Berantakan",
            d: "Coba bayangkan kamu punya toko dengan 100 barang. Kalau kita coding pakai cara biasa (variabel), kita harus membuat variabel <code>nama1</code>, <code>nama2</code>, <code>nama3</code>... sampai 100 kali! <br><br>Lihat animasi di kanan. Datanya <strong>mencar-mencar dan berserakan</strong> di memori komputer. Ini sangat rawan error, misal harga 'Buku' tertukar dengan 'Pena' karena tidak ada pengelompokan yang jelas.",
            c: `<span class="k">char</span> nama1[] = <span class="s">"Buku"</span>;\n<span class="k">int</span> harga1 = 5000;\n<span class="k">int</span> stok1 = 10;`,
            f: () => {
                draw(`<div class="box anim-pop" style="top:20%; left:10%">Buku</div>
                      <div class="box anim-pop" style="top:50%; left:60%; animation-delay:0.2s">5000</div>
                      <div class="box anim-pop" style="top:30%; left:40%; animation-delay:0.4s">Stok: 10</div>
                      <div class="box anim-pop" style="top:70%; left:20%; border-color:red; animation-delay:0.6s">Pena</div>`);
                term("Memori dialokasikan secara acak (Berantakan).");
            }
        },
        {
            t: "2. Solusi: Struct (Bungkus Paket)",
            d: "Nah, solusinya adalah <strong>STRUCT</strong>. Anggap Struct itu seperti sebuah <strong>Kardus Paket</strong>.<br><br>Kita ambil Nama, Harga, dan Stok tadi, lalu kita masukkan ke dalam satu kardus bernama 'Barang'. Jadi kemana pun barang itu dipindahkan, harganya dan stoknya pasti ikut menempel. Rapi kan? Di kanan kamu bisa lihat datanya sekarang terbungkus rapi dalam satu kotak.",
            c: `<span class="k">typedef struct</span> {\n  <span class="k">char</span> nama[50];\n  <span class="k">int</span> harga, stok;\n} <span class="t">Barang</span>;`,
            f: () => {
                draw(`<div class="box anim-pop" style="width:200px; border-color:var(--accent);">
                        <div class="label" style="background:var(--accent); color:white;">STRUCT BARANG</div>
                        <div>Nama: Buku</div><div>Harga: 5000</div><div>Stok: 10</div>
                      </div>`);
                term("Data terstruktur rapi dalam satu blok memori.");
            }
        },
        {
            t: "3. Kesalahan Pemula: Pass by Value",
            d: "Hati-hati! Jika kamu mengirim data struct ke sebuah fungsi <strong>TANPA</strong> menggunakan Pointer, komputer itu 'pelit'. <br><br>Dia tidak memberikan data aslinya, melainkan hanya memberikan <strong>FOTOKOPIANNYA</strong> (Duplikat). Lihat animasi kanan: Fungsi mengubah stok di kertas fotokopi jadi 99, tapi Barang Asli stoknya TETAP 10. Ini bug yang sering terjadi pada pemula.",
            c: `<span class="k">void</span> ubah(<span class="t">Barang</span> b) {\n  b.stok = 99; <span class="c">// Cuma ubah fotokopi</span>\n}`,
            f: () => {
                draw(`<div class="box" style="left:10%">ASLI<br>Stok: 10</div>
                      <div class="box" style="left:60%; opacity:0.5; border-style:dashed">FOTOKOPI<br>Stok: 99</div>
                      <div style="position:absolute; font-size:2rem; left:40%">‚ûî</div>`);
                term("Warning: Data asli TIDAK berubah (Hanya duplikat).");
            }
        },
        {
            t: "4. Cara Benar: Pass by Reference",
            d: "Solusinya? Gunakan <strong>POINTER (*)</strong>. <br><br>Pointer itu seperti kita kasih <strong>Share Location (Shareloc)</strong> ke fungsi. Kita bilang: <em>'Hei fungsi, barang aslinya ada di ALAMAT ini lho, tolong ubah ya'</em>. <br><br>Lihat panah kuning di animasi. Fungsi sekarang tau lokasi aslinya dan bisa mengubah stok ASLI menjadi 99.",
            c: `<span class="k">void</span> ubah(<span class="t">Barang</span> <span class="k">*b</span>) {\n  b->stok = 99; <span class="c">// Akses alamat & ubah</span>\n}`,
            f: () => {
                draw(`<div class="box" id="asli" style="left:10%; border-color:var(--green)">ASLI<br>Stok: 10</div>
                      <div class="box" style="left:60%; border-color:var(--yellow)">POINTER<br>Alamat: 0xA1</div>
                      <svg style="position:absolute; width:100%; height:100%; pointer-events:none; top:0; left:0;">
                          <line x1="60%" y1="50%" x2="30%" y2="50%" stroke="yellow" stroke-width="3" marker-end="url(#arrow)" />
                          <defs><marker id="arrow" markerWidth="10" markerHeight="10" refX="0" refY="3" orient="auto"><path d="M0,0 L0,6 L9,3 z" fill="yellow"/></marker></defs>
                      </svg>`);
                wait(() => {
                    document.getElementById('asli').innerHTML = "ASLI<br>Stok: 99";
                    document.getElementById('asli').classList.add('anim-pop');
                    term("Success: Data asli berhasil diupdate!");
                }, 1500);
            }
        },
        {
            t: "5. Gudang Butuh Rak (Array)",
            d: "Gudang tidak mungkin cuma nyimpen 1 barang kan? Kita butuh rak yang banyak. Dalam bahasa C, Rak itu disebut <strong>ARRAY</strong>. <br><br>Kita siapkan struct baru bernama <code>Gudang</code> yang di dalamnya ada array <code>daftar[100]</code>. Artinya, kita memesan 100 slot kosong di memori untuk menampung barang-barang kita nanti.",
            c: `<span class="k">typedef struct</span> {\n  <span class="t">Barang</span> daftar[100];\n  <span class="k">int</span> jum;\n} <span class="t">Gudang</span>;`,
            f: () => {
                draw(`<div class="array-rack anim-pop">
                        <div class="rack-slot">0</div><div class="rack-slot">1</div><div class="rack-slot">2</div>
                      </div>`);
                term("Rak kosong siap diisi.");
            }
        },
        {
            t: "6. Tantangan Logika: Copy Manual",
            d: "Di tugas ini, kita dilarang pakai jalan pintas (<code>strcpy</code>). Kita harus memindahkan huruf satu per satu layaknya kuli bangunan. <br><br>Lihat animasi di kanan: Kita ambil huruf 'B', masukkan. Ambil huruf 'U', masukkan. Terus berulang (looping) sampai ketemu tanda berhenti (<code>\\0</code>). Ini melatih logika <code>while loop</code> kamu.",
            c: `<span class="k">while</span>(asal[i] != <span class="s">'\\0'</span>) {\n  tujuan[i] = asal[i];\n  i++;\n}`,
            f: () => {
                draw(`<div style="display:flex; flex-direction:column; gap:10px; align-items:center;">
                        <div style="display:flex; gap:5px;" id="src"></div>
                        <div style="font-size:1.5rem">‚¨áÔ∏è</div>
                        <div style="display:flex; gap:5px;" id="dest"></div>
                      </div>`);
                const w = "BUKU";
                const src = document.getElementById('src');
                const dest = document.getElementById('dest');
                for(let c of w) src.innerHTML += `<div class="box" style="position:static; padding:5px;">${c}</div>`;
                for(let i=0; i<w.length; i++) dest.innerHTML += `<div class="box" id="d${i}" style="position:static; padding:5px; border-style:dashed; opacity:0.3">_</div>`;
                
                let i = 0;
                let iv = loop(() => {
                    if(i >= w.length) { clearInterval(iv); return; }
                    let el = document.getElementById(`d${i}`);
                    if(el) {
                        el.innerText = w[i];
                        el.style.opacity = 1;
                        el.style.borderStyle = "solid";
                        el.style.borderColor = "var(--green)";
                    }
                    i++;
                }, 500);
            }
        },
        {
            t: "7. Menggabungkan Semua: Tambah Barang",
            d: "Sekarang kita gabungkan ilmunya. Untuk menambah barang:<br>1. Minta input dari User.<br>2. Panggil Gudang pakai <strong>Pointer</strong> (biar tersimpan di gudang asli).<br>3. Gunakan logika copy manual tadi untuk memasukkan nama ke dalam Rak.<br><br>Lihat animasi: Kotak 'RAM' terbang masuk ke slot index 0.",
            c: `salin(g->daftar[jum].nama, input);\ng->jum++;`,
            f: () => {
                draw(`<div class="box anim-pop" style="left:5%; border-color:cyan; z-index:10">INPUT<br>"RAM"</div>
                      <div class="array-rack" style="position:absolute; right:10%;">
                        <div class="rack-slot" id="slot0">0</div><div class="rack-slot">1</div>
                      </div>`);
                wait(() => {
                    const input = document.querySelector('.box');
                    input.style.left = "60%"; // Pindah posisi visual
                    input.style.opacity = 0; // Hilang
                    document.getElementById('slot0').innerHTML = `<div class="rack-item anim-pop">RAM</div>`;
                    term("Barang 'RAM' berhasil masuk ke Index 0.");
                }, 1000);
            }
        },
        {
            t: "8. Logika Hapus (Wajib Geser)",
            d: "Menghapus barang di Array itu <em>tricky</em>. Kita tidak boleh meninggalkan lubang kosong di tengah rak. <br><br>Jika Barang A (posisi 0) dihapus, maka Barang B (posisi 1) wajib <strong>DIGESER KE KIRI</strong> untuk menutupi lubang tersebut. Lihat animasi bagaimana 'B' bergerak menimpa 'A' yang dihapus.",
            c: `daftar[i] = daftar[i+1]; <span class="c">// Timpa kiri dgn kanan</span>`,
            f: () => {
                draw(`<div class="array-rack">
                        <div class="rack-slot" style="border-color:red">A</div>
                        <div class="rack-slot"><div class="rack-item" id="itemB">B</div></div>
                      </div>`);
                wait(() => {
                    const b = document.getElementById('itemB');
                    b.style.transform = "translateX(-75px)"; // Geser kiri visual
                    term("Barang B bergeser ke kiri menimpa A.");
                }, 1000);
            }
        },
        {
            t: "9. Modular: Jangan Menumpuk Kode",
            d: "Programmer profesional tidak menulis semua kode di satu file panjang. Itu bikin pusing! <br><br>Kita bagi tugas menjadi 3 file terpisah. Lihat kartu-kartu yang muncul di animasi. Ada bagian <strong>Header</strong>, bagian <strong>Logika</strong>, dan bagian <strong>Main</strong>.",
            c: `File Project:\n1. Header.h\n2. Logika.c\n3. Main.c`,
            f: () => {
                draw(`<div class="box anim-pop" style="left:10%">Header</div>
                      <div class="box anim-pop" style="left:40%; animation-delay:0.2s">Logika</div>
                      <div class="box anim-pop" style="left:70%; animation-delay:0.4s">Main</div>`);
            }
        },
        {
            t: "10. File 1: Header.h (Daftar Menu)",
            d: "File <code>.h</code> (Header) ini ibarat <strong>Daftar Menu Restoran</strong>. <br><br>Dia hanya memberi tahu: <em>'Di sini ada Menu Nasi Goreng, Mie Goreng, dll'</em>. Dia cuma berisi definisi Struct dan nama-nama fungsi, tapi TIDAK ADA kode cara masaknya.",
            c: `<span class="k">typedef struct</span> {...};\n<span class="k">void</span> tambah();`,
            f: () => {
                draw(`<div class="box" style="width:150px; height:180px; border-color:var(--yellow)">
                        <div class="label" style="background:var(--yellow); color:black">HEADER.H</div>
                        <div style="font-size:0.7rem; text-align:left; margin-top:10px">
                           - Struct Barang<br>- Struct Gudang<br>- void tambah();<br>- void hapus();
                        </div>
                      </div>`);
                term("Compiler mencatat 'Janji' fungsi.");
            }
        },
        {
            t: "11. File 2: Logika.c (Dapur)",
            d: "Nah, file <code>.c</code> ini ibarat <strong>Dapur Restoran</strong>. <br><br>Di sinilah koki bekerja. Semua kode rumit seperti <code>while loop</code> salin string tadi, dan logika pointer ada di sini. File ini yang 'memasak' datanya.",
            c: `<span class="k">#include</span> "header.h"\n<span class="k">void</span> tambah() { ... }`,
            f: () => {
                draw(`<div class="box anim-slide-in" style="width:150px; height:180px; border-color:var(--accent)">
                        <div class="label" style="background:var(--accent); color:black">LOGIKA.C</div>
                        <div style="font-size:0.7rem; text-align:left; margin-top:10px">
                           <span class="c">// Mesin</span><br>
                           while(loop)...<br>
                           pinter->...
                        </div>
                      </div>`);
            }
        },
        {
            t: "12. File 3: Main.c (Kasir)",
            d: "Terakhir, <code>main.c</code> adalah <strong>Kasir atau Pelayan</strong>. <br><br>Tugasnya cuma menyapa user, menampilkan menu pilihan, dan meneruskan pesanan user ke dapur (Logika). File ini harus bersih dan mudah dibaca.",
            c: `<span class="k">#include</span> "header.h"\n<span class="k">int</span> main() { menu(); }`,
            f: () => {
                draw(`<div class="box anim-pop" style="width:150px; height:180px; border-color:var(--green)">
                        <div class="label" style="background:var(--green); color:black">MAIN.C</div>
                        <div style="font-size:0.7rem; text-align:left; margin-top:10px">
                           printf("MENU");<br>
                           scanf("%d");
                        </div>
                      </div>`);
            }
        },
        {
            t: "13. DEMO: Menjalankan Program",
            d: "Sekarang mari kita lihat hasil akhirnya. Saat program di-Run, fungsi <code>main()</code> akan menampilkan menu interaktif di Terminal (kotak hitam di bawah).",
            c: `Running gudang.exe...`,
            f: () => {
                draw(`<div style="font-size:4rem;" class="anim-pop">üöÄ</div>`);
                term("Hai, aku asisten Gudang!\n1. Cari\n2. Tampil\n3. Tambah\n4. Hapus\n5. Keluar\n> _");
            }
        },
        {
            t: "14. DEMO: Menambah Laptop",
            d: "User memilih menu Tambah. Dia mengetik 'Laptop' seharga 5 Juta. <br><br>Perhatikan kotak biru di animasi. Itu adalah data yang sedang diproses oleh logika kita, lalu dimasukkan ke dalam Rak Index 0 (kotak merah).",
            c: `Menu: 3 (Tambah)\nNama: Laptop\nHarga: 5jt`,
            f: () => {
                draw(`<div class="array-rack" style="position:absolute; bottom:20%;">
                        <div class="rack-slot" id="s0">0</div><div class="rack-slot">1</div><div class="rack-slot">2</div>
                      </div>
                      <div class="box" id="inp" style="top:10%; border-color:cyan;">Laptop</div>`);
                term("> 3\nInput: Laptop...");
                
                wait(() => {
                    const inp = document.getElementById('inp');
                    inp.style.top = "60%"; 
                    inp.style.left = "35%"; // Posisi slot 0 kira-kira
                    inp.style.transform = "scale(0.5)";
                    inp.style.opacity = 0;
                }, 500);

                wait(() => {
                    document.getElementById('s0').innerHTML = `<div class="rack-item anim-pop" style="background:#ef4444">Laptop<br>5jt</div>`;
                    term("[SUKSES] Laptop masuk index 0.");
                }, 1200);
            }
        },
        {
            t: "15. DEMO: Menambah Mouse",
            d: "User menambah barang kedua: 'Mouse'. <br><br>Karena Index 0 sudah terisi Laptop, maka Pointer otomatis mengarahkan Mouse ke slot kosong berikutnya, yaitu Index 1. <code>jum</code> sekarang bernilai 2.",
            c: `Menu: 3 (Tambah)\nNama: Mouse\nHarga: 150rb`,
            f: () => {
                // Gambar keadaan sebelumnya
                draw(`<div class="array-rack" style="position:absolute; bottom:20%;">
                        <div class="rack-slot"><div class="rack-item" style="background:#ef4444">Laptop</div></div>
                        <div class="rack-slot" id="s1">1</div><div class="rack-slot">2</div>
                      </div>
                      <div class="box" id="inp2" style="top:10%; border-color:cyan;">Mouse</div>`);
                term("> 3\nInput: Mouse...");

                wait(() => {
                    const inp = document.getElementById('inp2');
                    inp.style.top = "60%";
                    inp.style.left = "48%"; // Posisi slot 1
                    inp.style.transform = "scale(0.5)";
                    inp.style.opacity = 0;
                }, 500);

                wait(() => {
                    document.getElementById('s1').innerHTML = `<div class="rack-item anim-pop">Mouse<br>150rb</div>`;
                    term("[SUKSES] Mouse masuk index 1.");
                }, 1200);
            }
        },
        {
            t: "16. DEMO: Tampilkan Semua Barang",
            d: "Saat user memilih 'Tampil', program melakukan <strong>Looping (For Loop)</strong>. <br><br>Dia akan menunjuk satu per satu rak yang ada isinya, lalu mencetak isinya ke layar. Lihat efek cahaya putih di animasi yang berpindah dari Laptop ke Mouse.",
            c: `for(i=0; i<jum; i++) print...`,
            f: () => {
                draw(`<div class="array-rack">
                        <div class="rack-slot" id="h0"><div class="rack-item" style="background:#ef4444">Laptop</div></div>
                        <div class="rack-slot" id="h1"><div class="rack-item">Mouse</div></div>
                      </div>`);
                term("> 2 (Tampil)");
                
                // Animasi highlight looping
                wait(() => {
                    document.getElementById('h0').style.borderColor = "white";
                    document.getElementById('h0').style.boxShadow = "0 0 15px white";
                    term("1. Laptop | 5jt");
                }, 500);
                
                wait(() => {
                    document.getElementById('h0').style.borderColor = "#444";
                    document.getElementById('h0').style.boxShadow = "none";
                    document.getElementById('h1').style.borderColor = "white";
                    document.getElementById('h1').style.boxShadow = "0 0 15px white";
                    term("2. Mouse | 150rb");
                }, 1500);
            }
        },
        {
            t: "17. DEMO: Mencari Barang",
            d: "User mencari kata kunci 'Mouse'. <br><br>Program akan membandingkan kata kunci dengan isi rak satu per satu. <br>1. Cek Rak 0 (Laptop) -> TIDAK SAMA. <br>2. Cek Rak 1 (Mouse) -> SAMA! Ketemu.",
            c: `Menu: 1 (Cari)\nKeyword: Mouse`,
            f: () => {
                draw(`<div class="array-rack">
                        <div class="rack-slot" id="c0"><div class="rack-item" style="background:#ef4444">Laptop</div></div>
                        <div class="rack-slot" id="c1"><div class="rack-item">Mouse</div></div>
                      </div>
                      <div id="search-tool" class="box" style="top:10%; opacity:0">üîç</div>`);
                
                // Animasi Search
                wait(() => {
                    const s = document.getElementById('search-tool');
                    s.style.opacity = 1;
                    s.style.top = "60%"; s.style.left = "35%"; // Cek Laptop
                    term("Cek Index 0: Laptop != Mouse");
                }, 500);

                wait(() => {
                    const s = document.getElementById('search-tool');
                    document.getElementById('c0').style.opacity = 0.3; // Bukan ini
                    s.style.left = "48%"; // Cek Mouse
                    term("Cek Index 1: Mouse == Mouse");
                }, 1500);

                wait(() => {
                    document.getElementById('c1').style.borderColor = "var(--green)";
                    document.getElementById('c1').style.boxShadow = "0 0 20px var(--green)";
                    term("[KETEMU] Mouse ada di Index 1");
                }, 2500);
            }
        },
        {
            t: "18. DEMO: Menghapus Laptop",
            d: "User ingin menghapus Laptop (Index 0). <br><br>Laptop dihapus (lihat kotak hilang). TAPI ingat logika tadi, kita tidak boleh menyisakan lubang. Maka Mouse (Index 1) otomatis <strong>digeser ke kiri</strong> menempati posisi Index 0.",
            c: `Menu: 4 (Hapus)\nIndex: 1 (Laptop)`,
            f: () => {
                draw(`<div class="array-rack">
                        <div class="rack-slot" id="del0"><div class="rack-item" style="background:#ef4444">Laptop</div></div>
                        <div class="rack-slot" id="del1"><div class="rack-item" id="movingMouse">Mouse</div></div>
                        <div class="rack-slot"></div>
                      </div>`);
                term("> 4 (Hapus Laptop)");

                wait(() => {
                    document.getElementById('del0').innerHTML = ""; // Hapus visual
                    document.getElementById('del0').style.borderColor = "red";
                    term("Laptop dihapus...");
                }, 800);

                wait(() => {
                    const m = document.getElementById('movingMouse');
                    m.style.transform = "translateX(-75px)"; // Animasi geser
                    term("Mouse bergeser mengisi Index 0");
                }, 1800);
            }
        },
        {
            t: "19. DEMO: Cek Hasil Akhir",
            d: "Mari kita buktikan apakah Mouse benar-benar pindah. Kita pilih menu 'Tampil' lagi. <br><br>Benar! Sekarang Mouse berada di urutan ke-1 (Index 0). Gudang rapi tanpa lubang.",
            c: `Menu: 2 (Tampil)`,
            f: () => {
                draw(`<div class="array-rack">
                        <div class="rack-slot"><div class="rack-item anim-pop">Mouse</div></div>
                        <div class="rack-slot"></div>
                        <div class="rack-slot"></div>
                      </div>`);
                term("> 2\n1. Mouse | 150rb\n(Sisa 1 barang)");
            }
        },
        {
            t: "20. SELESAI!",
            d: "Selamat! Temanmu sekarang sudah belajar konsep paling sulit di C: Struct, Pointer, Array, dan Modular Programming. <br><br>Dengan visualisasi ini, semoga logika coding yang abstrak jadi terasa nyata dan mudah dimengerti.",
            c: `return 0;`,
            f: () => {
                draw(`<div style="text-align:center">
                        <div style="font-size:3rem">üéâ</div>
                        <h2 style="color:var(--green)">Misi Selesai</h2>
                        <p>Siap untuk Coding Projek Akhir!</p>
                      </div>`);
                term("Program finished.");
            }
        }
    ];

    // --- ENGINE UTAMA ---
    let currIdx = 0;

    function render() {
        cleanup(); // STOP SEMUA ANIMASI SEBELUMNYA
        
        const s = slides[currIdx];
        document.getElementById('s-num').innerText = currIdx + 1;
        document.getElementById('s-total').innerText = slides.length;
        document.getElementById('title').innerText = s.t;
        document.getElementById('desc').innerHTML = s.d;
        document.getElementById('code').innerHTML = s.c;
        document.getElementById('term').innerText = ">_";
        
        // Jalankan animasi slide ini
        s.f();
    }

    function draw(html) { document.getElementById('stage').innerHTML = html; }
    function term(txt) {
        const t = document.getElementById('term');
        t.innerText = txt;
        t.scrollTop = t.scrollHeight;
    }

    function move(n) {
        if(currIdx + n >= 0 && currIdx + n < slides.length) {
            currIdx += n;
            render();
        }
    }

    // Start
    render();

</script>
</body>
</html>