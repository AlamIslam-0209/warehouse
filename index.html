<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Belajar C: Dari Nol ke Struct</title>
    <style>
        :root {
            --bg: #0f172a;
            --sidebar: #1e293b;
            --text-main: #e2e8f0;
            --text-muted: #94a3b8;
            --accent: #3b82f6;
            --code-bg: #0d1117;
            --success: #10b981;
        }

        body {
            font-family: 'Segoe UI', sans-serif;
            background: var(--bg);
            color: var(--text-main);
            margin: 0;
            display: flex;
            height: 100vh;
            overflow: hidden;
        }

        /* KIRI: Panel Belajarrr  */
        .left-panel {
            width: 40%;
            padding: 30px;
            background: var(--sidebar);
            display: flex;
            flex-direction: column;
            border-right: 1px solid #334155;
            overflow-y: auto;
        }

        h1 { color: var(--accent); margin-top: 0; font-size: 1.8rem; }
        p { line-height: 1.6; color: var(--text-muted); }

        .progress-bar {
            height: 4px;
            background: #334155;
            margin-bottom: 20px;
            border-radius: 2px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background: var(--accent);
            width: 0%;
            transition: width 0.3s;
        }

        /* Area Kode */
        .code-box {
            background: var(--code-bg);
            padding: 15px;
            border-radius: 8px;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.9rem;
            white-space: pre-wrap;
            border-left: 4px solid var(--accent);
            margin: 20px 0;
            overflow-x: auto;
        }
        
        /* Syntax Colors (Manual classes to avoid bugs) */
        .kwd { color: #ff7b72; } /* Keyword: int, void */
        .typ { color: #79c0ff; } /* Type: struct */
        .str { color: #a5d6ff; } /* String */
        .fun { color: #d2a8ff; } /* Function */
        .cmt { color: #8b949e; font-style: italic; } /* Comment */

        .btn-container { margin-top: auto; display: flex; gap: 10px; }
        button {
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            font-weight: bold;
            cursor: pointer;
            transition: 0.2s;
        }
        .btn-next { background: var(--accent); color: white; flex: 1; }
        .btn-next:hover { background: #2563eb; }
        .btn-prev { background: #334155; color: white; }

        /* KANAN: Visualisasi */
        .right-panel {
            width: 60%;
            background: var(--bg);
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            background-image: radial-gradient(#334155 1px, transparent 1px);
            background-size: 30px 30px;
        }

        .visual-stage {
            width: 80%;
            height: 60%;
            position: relative;
        }

        /* Elemen Visualisasi */
        .var-box {
            background: #eab308;
            color: #000;
            padding: 10px;
            border-radius: 4px;
            font-weight: bold;
            display: inline-block;
            margin: 5px;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
            transition: all 0.5s ease;
            position: absolute;
        }

        .struct-container {
            border: 2px dashed #eab308;
            background: rgba(234, 179, 8, 0.1);
            border-radius: 8px;
            padding: 20px;
            position: absolute;
            transition: all 0.5s;
        }

        .array-slot {
            width: 100px;
            height: 120px;
            border: 1px solid #475569;
            background: #1e293b;
            display: inline-flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin: 5px;
            border-radius: 8px;
            font-size: 0.8rem;
            color: #64748b;
        }
        
        .array-slot.filled {
            border-color: var(--success);
            background: #064e3b;
            color: white;
        }

        .tooltip {
            background: rgba(0,0,0,0.8);
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 0.8rem;
            margin-bottom: 5px;
        }

    </style>
</head>
<body>

<div class="left-panel">
    <div class="progress-bar"><div class="progress-fill" id="progress"></div></div>
    <h1 id="title">Topik</h1>
    <div id="content">Deskripsi</div>
    <div id="code-area" class="code-box"></div>
    
    <div class="btn-container">
        <button class="btn-prev" onclick="changeStep(-1)">Kembali</button>
        <button class="btn-next" onclick="changeStep(1)">Lanjut</button>
    </div>
</div>

<div class="right-panel">
    <div style="position: absolute; top: 20px; color: #64748b; font-weight: bold;">VISUALISASI LOGIKA</div>
    <div id="visual-stage" class="visual-stage">
        </div>
</div>

<script>
    // --- DATABASE MATERI (Manual HTML coloring untuk mencegah bug) ---
    const steps = [
        {
            title: "1. Masalah Variabel Biasa",
            desc: "Bayangkan kamu mau mencatat data barang. Kalau cuma pakai variabel biasa (`char`, `int`), datanya akan <b>berserakan</b>. <br><br>Jika ada 1 barang, butuh 3 variabel. Kalau ada 100 barang? Kamu harus buat 300 variabel! Itu mustahil dikelola.",
            code: `<span class="kwd">char</span> nama1[50] = <span class="str">"Beras"</span>;
<span class="kwd">int</span> harga1 = <span class="kwd">12000</span>;
<span class="kwd">int</span> stok1 = <span class="kwd">50</span>;

<span class="cmt">// Kalau mau nambah barang lagi? Ribet!</span>
<span class="kwd">char</span> nama2[50]...
<span class="kwd">int</span> harga2...`,
            draw: () => {
                return `
                <div class="var-box" style="top:20%; left:20%">Nama: Beras</div>
                <div class="var-box" style="top:30%; left:50%">Harga: 12000</div>
                <div class="var-box" style="top:50%; left:30%">Stok: 50</div>
                <div style="position:absolute; top:65%; width:100%; text-align:center; color:red">Data Terpisah-pisah (Rawan Hilang)</div>
                `;
            }
        },
        {
            title: "2. Solusi: Struct (Bungkus)",
            desc: "Solusinya adalah <b>STRUCT</b>. <br>Anggap Struct itu seperti <b>Kardus</b>. Kita ambil variabel nama, harga, dan stok yang berserakan tadi, lalu kita masukkan ke dalam satu kardus berlabel 'Barang'.<br><br>Sekarang, kemana-mana kita bawa 1 kardus, isinya sudah lengkap 3 data.",
            code: `<span class="kwd">typedef struct</span> {
    <span class="kwd">char</span> nama[50];
    <span class="kwd">int</span> harga;
    <span class="kwd">int</span> stok;
} <span class="typ">Barang</span>;

<span class="cmt">// Sekarang kita punya tipe data baru bernama 'Barang'</span>`,
            draw: () => {
                return `
                <div class="struct-container" style="top:20%; left:30%; width:200px; height:200px;">
                    <div style="background:orange; color:black; padding:2px 10px; position:absolute; top:-15px; left:10px; font-weight:bold;">STRUCT BARANG</div>
                    <div class="var-box" style="position:relative; margin:10px auto; display:block;">Nama</div>
                    <div class="var-box" style="position:relative; margin:10px auto; display:block;">Harga</div>
                    <div class="var-box" style="position:relative; margin:10px auto; display:block;">Stok</div>
                </div>
                <div style="position:absolute; bottom:10%; width:100%; text-align:center; color:#10b981">Data terbungkus rapi!</div>
                `;
            }
        },
        {
            title: "3. Gudang (Array of Struct)",
            desc: "Kita mau membuat inventaris gudang, artinya kita butuh menampung <b>BANYAK</b> 'Kardus Barang' tadi.<br><br>Kita buat Struct kedua bernama `Inventaris`. Isinya adalah rak (Array) yang bisa menampung banyak `Barang`.",
            code: `<span class="kwd">typedef struct</span> {
    <span class="typ">Barang</span> daftar[100];  <span class="cmt">// Rak muat 100 barang</span>
    <span class="kwd">int</span> jumlah;          <span class="cmt">// Total isi saat ini</span>
} <span class="typ">Inventaris</span>;`,
            draw: () => {
                return `
                <div style="display:flex; flex-wrap:wrap; gap:10px; justify-content:center; margin-top:50px;">
                    <div class="array-slot">Index 0<br>(Kosong)</div>
                    <div class="array-slot">Index 1<br>(Kosong)</div>
                    <div class="array-slot">Index 2<br>(Kosong)</div>
                    <div class="array-slot">...</div>
                </div>
                <div style="text-align:center; margin-top:20px; color:#94a3b8">Array "daftar[100]" siap diisi</div>
                `;
            }
        },
        {
            title: "4. Fungsi Tambah (Pointer)",
            desc: "Nah, ini bagian penting. Saat kita membuat fungsi `tambahBarang`, kita harus mengirimkan <b>Alamat Memori</b> gudang (pakai `&` dan `*`).<br><br>Kenapa? Kalau tidak pakai alamat (pointer), program cuma akan mencatat di buku catatan tiruan, bukan buku gudang yang asli.",
            code: `<span class="kwd">void</span> tambah(<span class="typ">Inventaris</span> *g) {
    <span class="cmt">// g-> artinya kita akses langsung ke gudang asli</span>
    
    <span class="cmt">// Isi data ke index saat ini (g->jumlah)</span>
    g->daftar[g->jumlah].harga = 15000;
    
    <span class="cmt">// Jangan lupa geser ke slot berikutnya</span>
    g->jumlah++; 
}`,
            draw: () => {
                return `
                <div style="position:absolute; left:10%; top:30%; padding:20px; border:2px solid white; border-radius:10px;">
                    GUDANG ASLI<br>
                    <span style="color:yellow">Total: 0</span>
                </div>
                
                <div style="position:absolute; right:10%; top:10%; padding:20px; border:2px dashed cyan; border-radius:10px;">
                    FUNGSI TAMBAH<br>
                    <small>Sedang bekerja...</small>
                </div>

                <svg width="100%" height="100%" style="position:absolute; top:0; left:0; pointer-events:none;">
                    <line x1="70%" y1="20%" x2="25%" y2="40%" stroke="cyan" stroke-width="4" marker-end="url(#arrow)" />
                    <defs>
                        <marker id="arrow" markerWidth="10" markerHeight="10" refX="0" refY="3" orient="auto">
                        <path d="M0,0 L0,6 L9,3 z" fill="cyan" />
                        </marker>
                    </defs>
                </svg>
                <div style="position:absolute; bottom:20%; width:100%; text-align:center;">Pointer (*) membuat fungsi bisa mengedit Gudang Asli</div>
                `;
            }
        },
        {
            title: "5. Logika Hapus (Geser)",
            desc: "Menghapus data di Array itu 'tricky'. Kita tidak bisa membiarkan lubang kosong di tengah rak.<br><br>Jika Barang B dihapus, maka Barang C harus <b>digeser ke kiri</b> untuk menutupi lubang bekas B.",
            code: `<span class="cmt">// Misal hapus index ke-1</span>
<span class="kwd">for</span>(<span class="kwd">int</span> i = index; i < total-1; i++) {
    <span class="cmt">// Timpa barang sekarang dengan barang kanannya</span>
    g->daftar[i] = g->daftar[i+1];
}
g->jumlah--;`,
            draw: () => {
                return `
                <div style="display:flex; gap:10px; justify-content:center; margin-top:100px;">
                    <div class="array-slot filled">A [0]</div>
                    <div class="array-slot" style="border-style:dashed; opacity:0.5;">B [1]<br>(Dihapus)</div>
                    <div class="array-slot filled" style="animation: slideLeft 2s infinite;">C [2]</div>
                </div>
                <div style="text-align:center; margin-top:20px;">C harus geser ke kiri menimpa B</div>
                <style>
                    @keyframes slideLeft {
                        0% { transform: translateX(0); }
                        50% { transform: translateX(-115px); }
                        100% { transform: translateX(0); }
                    }
                </style>
                `;
            }
        },
        {
            title: "6. Kode Lengkap",
            desc: "Sekarang temanmu sudah paham konsepnya: Struct, Array, Pointer, dan Logika Geser. Ini kodenya.",
            code: `<span class="kwd">#include</span> &lt;stdio.h&gt;
<span class="kwd">#include</span> &lt;string.h&gt;

<span class="kwd">typedef struct</span> {
    <span class="kwd">char</span> nama[50];
    <span class="kwd">int</span> harga, stok;
} <span class="typ">Barang</span>;

<span class="kwd">typedef struct</span> {
    <span class="typ">Barang</span> daftar[100];
    <span class="kwd">int</span> jum;
} <span class="typ">Gudang</span>;

<span class="kwd">void</span> tambah(<span class="typ">Gudang</span> *g, <span class="kwd">char</span> *n, <span class="kwd">int</span> h, <span class="kwd">int</span> s) {
    strcpy(g->daftar[g->jum].nama, n);
    g->daftar[g->jum].harga = h;
    g->daftar[g->jum].stok = s;
    g->jum++;
}

<span class="kwd">int</span> main() {
    <span class="typ">Gudang</span> g = { .jum = 0 };
    tambah(&g, <span class="str">"Buku"</span>, 5000, 10);
    printf(<span class="str">"Sukses!"</span>);
    <span class="kwd">return</span> 0;
}`,
            draw: () => {
                return `
                <div style="display:flex; align-items:center; justify-content:center; height:100%; color:#10b981; font-size:2rem; font-weight:bold;">
                    SIAP CODING! ðŸš€
                </div>
                `;
            }
        }
    ];

    let currentStep = 0;

    function render() {
        const step = steps[currentStep];
        
        // Update Text
        document.getElementById('title').innerText = step.title;
        document.getElementById('content').innerHTML = step.desc;
        document.getElementById('code-area').innerHTML = step.code;
        
        // Update Visual
        document.getElementById('visual-stage').innerHTML = step.draw();

        // Update Progress
        const percent = ((currentStep + 1) / steps.length) * 100;
        document.getElementById('progress').style.width = percent + "%";
    }

    function changeStep(n) {
        if (currentStep + n >= 0 && currentStep + n < steps.length) {
            currentStep += n;
            render();
        }
    }

    // Init
    render();

</script>


</body>
</html>