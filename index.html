<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mastering C: Struct, Pointer & Modular</title>
    <style>
        :root {
            /* Tema Favorit (Modern Dark Blue/Yellow) */
            --bg: #0f172a;
            --sidebar: #1e293b;
            --text-main: #e2e8f0;
            --accent: #3b82f6; /* Biru Utama */
            --highlight: #eab308; /* Kuning (Penting) */
            --code-bg: #0d1117;
            --success: #10b981;
            --danger: #ef4444;
        }

        body {
            font-family: 'Segoe UI', Roboto, sans-serif;
            background: var(--bg);
            color: var(--text-main);
            margin: 0;
            display: flex;
            height: 100vh;
            overflow: hidden;
        }

        /* --- KIRI: PANEL MATERI --- */
        .left-panel {
            width: 42%;
            display: flex;
            flex-direction: column;
            border-right: 1px solid #334155;
            background: var(--sidebar);
            box-shadow: 5px 0 15px rgba(0,0,0,0.3);
            z-index: 10;
        }

        .content-scroll {
            padding: 30px;
            overflow-y: auto;
            flex-grow: 1;
        }

        h1 { color: var(--accent); font-size: 1.6rem; margin-top: 0; }
        .step-indicator { font-size: 0.75rem; text-transform: uppercase; color: #64748b; margin-bottom: 5px; letter-spacing: 1px; font-weight: bold; }
        p { line-height: 1.7; color: #cbd5e1; font-size: 0.95rem; }
        strong { color: var(--highlight); }

        .code-box {
            background: var(--code-bg);
            padding: 15px;
            border-radius: 8px;
            font-family: 'Consolas', monospace;
            font-size: 0.85rem;
            border-left: 4px solid var(--highlight);
            margin: 20px 0;
            white-space: pre-wrap;
            overflow-x: auto;
            box-shadow: 0 4px 6px rgba(0,0,0,0.2);
            color: #e2e8f0;
        }

        /* Syntax Highlighting */
        .kwd { color: #ff7b72; font-weight: bold; } /* int, void */
        .typ { color: #79c0ff; font-weight: bold; } /* Struct Name */
        .str { color: #a5d6ff; } /* "string" */
        .fun { color: #d2a8ff; } /* function() */
        .cmt { color: #8b949e; font-style: italic; } /* // comments */
        .ptr { color: #eab308; font-weight: bold; } /* *pointer */

        .controls {
            padding: 20px;
            border-top: 1px solid #334155;
            display: flex;
            gap: 15px;
            background: #151e2e;
        }

        button {
            flex: 1; padding: 12px; border: none; border-radius: 6px;
            font-weight: bold; cursor: pointer; transition: 0.3s;
            font-size: 0.9rem;
        }
        .btn-prev { background: #334155; color: white; }
        .btn-next { background: var(--accent); color: white; box-shadow: 0 4px 10px rgba(59, 130, 246, 0.4); }
        .btn-next:hover { background: #2563eb; transform: translateY(-2px); }

        /* --- KANAN: VISUALISASI --- */
        .right-panel {
            width: 58%;
            position: relative;
            background-image: radial-gradient(#334155 1px, transparent 1px);
            background-size: 30px 30px;
            display: flex;
            flex-direction: column;
        }

        .visual-stage {
            flex-grow: 1;
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Terminal UI */
        .terminal-box {
            height: 180px;
            background: #0f0f0f;
            border-top: 3px solid #334155;
            padding: 15px;
            font-family: 'Consolas', monospace;
            font-size: 0.9rem;
            color: var(--success);
            overflow-y: auto;
        }
        .term-line { margin-bottom: 5px; }
        .term-input { color: white; animation: blink 1s infinite; }
        @keyframes blink { 50% { opacity: 0; } }

        /* --- VISUAL ELEMENTS --- */
        
        /* 1. Pointer Visualization */
        .pointer-container {
            display: flex; align-items: center; gap: 50px;
        }
        .memory-block {
            padding: 20px; border-radius: 8px; background: #1e293b;
            border: 2px solid #475569; position: relative;
            min-width: 120px; text-align: center;
        }
        .memory-addr {
            position: absolute; top: -10px; left: 10px; background: var(--highlight);
            color: black; font-size: 0.7rem; padding: 2px 6px; border-radius: 4px; font-weight: bold;
        }
        .arrow-connect {
            height: 4px; background: var(--accent); width: 100px; position: relative;
        }
        .arrow-connect::after {
            content: ''; position: absolute; right: -10px; top: -8px;
            border-left: 15px solid var(--accent);
            border-top: 10px solid transparent;
            border-bottom: 10px solid transparent;
        }

        /* 2. String Manual Animation */
        .char-grid { display: flex; gap: 5px; margin-bottom: 40px; }
        .char-box {
            width: 40px; height: 50px; border: 2px solid #555;
            display: flex; align-items: center; justify-content: center;
            font-weight: bold; background: #222; position: relative;
            border-radius: 4px; color: white;
        }
        .char-idx { position: absolute; bottom: -20px; font-size: 0.7rem; color: #888; }
        .scan-line {
            position: absolute; width: 44px; height: 54px;
            border: 2px solid var(--highlight);
            top: -4px; left: -4px; border-radius: 6px;
            transition: transform 0.3s ease;
            box-shadow: 0 0 15px rgba(234, 179, 8, 0.5);
        }

        /* 3. Modular File Cards */
        .file-card {
            width: 160px; height: 200px; background: #1e293b;
            border: 1px solid #475569; border-radius: 8px;
            position: absolute; display: flex; flex-direction: column;
            box-shadow: 0 10px 25px rgba(0,0,0,0.5);
            transition: transform 0.5s;
        }
        .file-head {
            background: #0f172a; padding: 10px; text-align: center;
            font-weight: bold; color: var(--accent); border-bottom: 1px solid #475569;
        }
        .file-content { padding: 10px; font-size: 0.6rem; color: #94a3b8; overflow: hidden; }

    </style>
</head>
<body>

    <div class="left-panel">
        <div class="content-scroll">
            <div class="step-indicator">Langkah <span id="step-num">1</span> dari 8</div>
            <h1 id="title">Judul Materi</h1>
            <div id="desc">Deskripsi materi...</div>
            <div id="code-area" class="code-box"></div>
        </div>
        <div class="controls">
            <button class="btn-prev" onclick="changeStep(-1)">Kembali</button>
            <button class="btn-next" onclick="changeStep(1)">Lanjut</button>
        </div>
    </div>

    <div class="right-panel">
        <div class="visual-stage" id="visual-stage">
            </div>
        <div class="terminal-box">
            <div class="term-line" style="border-bottom: 1px solid #333; margin-bottom:10px; color: #64748b;">TERMINAL OUTPUT</div>
            <div id="term-content"></div>
        </div>
    </div>

<script>
    // --- DATABASE MATERI ---
    const steps = [
        {
            title: "1. Masalah Data & Solusi Struct",
            desc: "Bayangkan gudang kita punya 100 barang. Kalau pakai variabel biasa, kita butuh 300 variabel (`nama1`, `harga1`, `stok1`...). Berantakan!<br><br>Solusinya: <strong>STRUCT</strong>. Kita bungkus Nama, Harga, dan Stok jadi satu paket tipe data baru bernama `Barang`.",
            code: `<span class="kwd">typedef struct</span> {
    <span class="kwd">char</span> nama[50];
    <span class="kwd">int</span> harga, stok;
} <span class="typ">Barang</span>;

<span class="cmt">// Kita juga butuh wadah array-nya</span>
<span class="kwd">typedef struct</span> {
    <span class="typ">Barang</span> daftar[100]; <span class="cmt">// Array of Struct</span>
    <span class="kwd">int</span> jum;           <span class="cmt">// Hitung jumlah isi</span>
} <span class="typ">Gudang</span>;`,
            setup: () => {
                setVisual(`
                    <div style="text-align:center;">
                        <div class="memory-block" style="border-color:var(--highlight); width:200px;">
                            <div class="memory-addr">STRUCT BARANG</div>
                            <div style="border-bottom:1px solid #333; padding:5px;">Nama [ ]</div>
                            <div style="border-bottom:1px solid #333; padding:5px;">Harga</div>
                            <div style="padding:5px;">Stok</div>
                        </div>
                        <div style="margin-top:20px; color:#94a3b8;">Satu paket data yang rapi</div>
                    </div>
                `);
                logTerm("Struct 'Barang' defined.\nStruct 'Gudang' defined.");
            }
        },
        {
            title: "2. Konsep Pointer (Kunci Utama)",
            desc: "Ini bagian terpenting! Saat kita mau mengubah data Gudang lewat fungsi (misal `tambahBarang`), kita tidak boleh mengirim <em>kopian</em> gudangnya.<br><br>Kita harus mengirim <strong>ALAMAT MEMORI</strong> gudang aslinya menggunakan <strong>Pointer (*)</strong>. Analoginya: Kita kasih 'Share Location' gudang, bukan kirim foto gudangnya.",
            code: `<span class="kwd">void</span> ubahGudang(<span class="typ">Gudang</span> <span class="ptr">*g</span>) {
    <span class="cmt">// 'g' adalah alamat (pointer)</span>
    <span class="cmt">// 'g->jum' artinya: Pergi ke alamat g, akses jum</span>
    g->jum = 10;
}

<span class="kwd">int</span> main() {
    <span class="typ">Gudang</span> gudangAsli;
    <span class="cmt">// Kirim alamat pakai & (Ampersand)</span>
    ubahGudang(<span class="ptr">&</span>gudangAsli); 
}`,
            setup: () => {
                setVisual(`
                    <div class="pointer-container">
                        <div class="memory-block">
                            <div class="memory-addr">0xFF1 (Main)</div>
                            <div>Gudang Asli</div>
                            <div style="color:var(--success); font-weight:bold; font-size:1.5rem;">jum = 10</div>
                        </div>
                        <div class="arrow-connect"></div>
                        <div class="memory-block" style="border-color:var(--accent)">
                            <div class="memory-addr">Pointer *g</div>
                            <div style="font-size:0.8rem">Menyimpan:</div>
                            <div style="color:var(--highlight); font-weight:bold;">0xFF1</div>
                        </div>
                    </div>
                    <div style="position:absolute; bottom:20%; text-align:center;">Pointer *g menunjuk ke Gudang Asli</div>
                `);
                logTerm("Mengakses alamat 0xFF1...\nMengubah nilai 'jum' jadi 10 di memori asli.");
            }
        },
        {
            title: "3. Tantangan: String Manual",
            desc: "Di tugas ini, kita dilarang pakai `strcpy` (copy paste instan). Kita harus melatih logika memindahkan huruf satu per satu.<br><br>Kita pakai <strong>Looping</strong>: Ambil huruf di posisi 0, salin. Posisi 1, salin. Terus sampai ketemu karakter Null (`\\0`).",
            code: `<span class="kwd">void</span> salin(<span class="kwd">char</span> *tujuan, <span class="kwd">char</span> *asal) {
    <span class="kwd">int</span> i = 0;
    <span class="cmt">// Loop sampai ketemu ujung string (\\0)</span>
    <span class="kwd">while</span> (asal[i] != <span class="str">'\\0'</span>) {
        tujuan[i] = asal[i]; <span class="cmt">// Copy huruf</span>
        i++;
    }
    tujuan[i] = <span class="str">'\\0'</span>; <span class="cmt">// Jangan lupa tutup!</span>
}`,
            setup: () => {
                setVisual(`
                    <div style="display:flex; flex-direction:column; align-items:center;">
                        <div class="char-grid" id="src-grid"></div>
                        <div style="font-size:2rem; color:var(--highlight);">‚¨áÔ∏è</div>
                        <div class="char-grid" id="dest-grid"></div>
                        <div class="scan-line" id="scanner"></div>
                    </div>
                `);
                
                // Animasi String
                const chars = ['B','u','k','u','\\0'];
                const src = document.getElementById('src-grid');
                const dest = document.getElementById('dest-grid');
                const scanner = document.getElementById('scanner');
                
                // Init Grids
                chars.forEach((c, i) => {
                    src.innerHTML += `<div class="char-box">${c}<span class="char-idx">${i}</span></div>`;
                    dest.innerHTML += `<div class="char-box" id="d-${i}"><span class="char-idx">${i}</span></div>`;
                });

                logTerm("Memulai proses penyalinan manual...");

                // Run Animation
                let step = 0;
                let interval = setInterval(() => {
                    if(step >= chars.length) {
                        clearInterval(interval);
                        logTerm("Selesai. String ditutup dengan NULL.");
                        return;
                    }
                    // Move scanner
                    scanner.style.transform = `translateX(${step * 45}px)`; // 40px box + 5px gap
                    
                    // Fill dest
                    setTimeout(() => {
                        document.getElementById(`d-${step}`).innerText = chars[step];
                        document.getElementById(`d-${step}`).style.borderColor = "#10b981";
                        logTerm(`Menyalin index[${step}]: '${chars[step]}'`);
                    }, 300);

                    step++;
                }, 1000);
            }
        },
        {
            title: "4. Modular Programming: Pecah File",
            desc: "Kode yang baik itu tidak ditumpuk di satu file. Kita pecah jadi 3 bagian agar rapi:<br><br>1. <strong>header.h</strong>: Kamus (Isi definisi Struct & Nama Fungsi).<br>2. <strong>logic.c</strong>: Dapur (Isi logika rumit pointer & loop tadi).<br>3. <strong>main.c</strong>: Kasir (Menu utama yang dilihat user).",
            code: `<span class="cmt">// --- header.h ---</span>
<span class="kwd">typedef struct</span>...
<span class="kwd">void</span> tambah();

<span class="cmt">// --- logic.c ---</span>
<span class="kwd">#include</span> "header.h"
<span class="kwd">void</span> tambah() { ... }

<span class="cmt">// --- main.c ---</span>
<span class="kwd">#include</span> "header.h"
<span class="kwd">int</span> main() { ... }`,
            setup: () => {
                setVisual(`
                    <div class="file-card" style="left:10%; top:20%;">
                        <div class="file-head">header.h</div>
                        <div class="file-content">
                            Struct Barang<br>Struct Gudang<br>void salin();<br>void tambah();
                        </div>
                    </div>
                    <div class="file-card" style="left:40%; top:20%;">
                        <div class="file-head">logic.c</div>
                        <div class="file-content">
                            #include "header.h"<br>
                            // Logika while loop<br>
                            // Logika pointer<br>
                            // Algoritma geser
                        </div>
                    </div>
                    <div class="file-card" style="left:70%; top:20%; border-color:var(--success)">
                        <div class="file-head">main.c</div>
                        <div class="file-content">
                            int main() {<br>
                              menu();<br>
                            }<br>// UI Only
                        </div>
                    </div>
                `);
                logTerm("Files separated successfully.\nCompiler will link them together.");
            }
        },
        {
            title: "5. Menggabungkan Semua (Logic Tambah)",
            desc: "Sekarang kita gabungkan Struct, Pointer, dan String Manual untuk fitur <strong>Tambah Barang</strong>.<br><br>Perhatikan penggunaan `g->daftar` (akses lewat pointer) dan pemanggilan fungsi `salin` manual kita.",
            code: `<span class="kwd">void</span> tambah(<span class="typ">Gudang</span> <span class="ptr">*g</span>) {
    <span class="kwd">char</span> inputNama[50];
    <span class="kwd">int</span> inputHarga, inputStok;
    
    printf(<span class="str">"Nama: "</span>); scanf(<span class="str">"%s"</span>, inputNama);
    
    <span class="cmt">// Panggil fungsi manual kita</span>
    <span class="cmt">// Salin ke g->daftar index ke-[jum]</span>
    salin(g->daftar[g->jum].nama, inputNama);
    
    g->jum++; <span class="cmt">// Naikkan counter</span>
}`,
            setup: () => {
                setVisual(`
                    <div class="pointer-container">
                        <div class="memory-block" style="width:150px">
                            <div class="memory-addr">Input User</div>
                            <div>"Pensil"</div>
                        </div>
                        <div style="font-size:2rem; color:var(--accent);">‚ûî</div>
                        <div class="memory-block" style="width:150px; border-color:var(--success)">
                            <div class="memory-addr">Gudang->daftar[0]</div>
                            <div style="color:var(--success)">"Pensil"</div>
                        </div>
                    </div>
                `);
                logTerm("User input: Pensil\nSalin manual ke Gudang[0]...\nJumlah barang: 1");
            }
        },
        {
            title: "6. Logika Manual: Cek Kesamaan (Search)",
            desc: "Tanpa `strcmp`, gimana cara cari barang? Kita bandingkan lagi huruf demi huruf.<br>Jika huruf ke-1 sama, cek ke-2. Jika ada satu saja yang beda, berarti bukan barang itu.",
            code: `<span class="kwd">int</span> cekSama(<span class="kwd">char</span> *a, <span class="kwd">char</span> *b) {
    <span class="kwd">int</span> i = 0;
    <span class="kwd">while</span> (a[i] != <span class="str">'\\0'</span> && b[i] != <span class="str">'\\0'</span>) {
        <span class="kwd">if</span> (a[i] != b[i]) <span class="kwd">return</span> 0; <span class="cmt">// BEDA!</span>
        i++;
    }
    <span class="cmt">// Pastikan panjangnya juga sama</span>
    <span class="kwd">if</span> (a[i] != b[i]) <span class="kwd">return</span> 0;
    
    <span class="kwd">return</span> 1; <span class="cmt">// SAMA PERSIS</span>
}`,
            setup: () => {
                setVisual(`
                    <div style="text-align:center;">
                        <h3>Membandingkan "Buku" vs "Buka"</h3>
                        <div style="display:flex; justify-content:center; gap:10px; margin-top:20px;">
                            <div class="char-box" style="border-color:var(--success)">B</div>
                            <div class="char-box" style="border-color:var(--success)">u</div>
                            <div class="char-box" style="border-color:var(--success)">k</div>
                            <div class="char-box" style="border-color:var(--danger)">u</div>
                        </div>
                        <div style="margin:10px;">VS</div>
                        <div style="display:flex; justify-content:center; gap:10px;">
                            <div class="char-box" style="border-color:var(--success)">B</div>
                            <div class="char-box" style="border-color:var(--success)">u</div>
                            <div class="char-box" style="border-color:var(--success)">k</div>
                            <div class="char-box" style="border-color:var(--danger)">a</div>
                        </div>
                        <div style="color:var(--danger); font-weight:bold; margin-top:20px;">Index 3 Beda! Return 0.</div>
                    </div>
                `);
                logTerm("Checking Index 0... OK\nChecking Index 1... OK\nChecking Index 2... OK\nChecking Index 3... FAIL!");
            }
        },
        {
            title: "7. Logika Hapus (Shift Array)",
            desc: "Menghapus array itu sebenarnya <strong>Menggeser</strong>. Kalau barang index 0 dihapus, barang index 1 harus pindah ke kiri menimpa index 0.<br>Jangan lupa kurangi `jum` di akhir.",
            code: `<span class="kwd">void</span> hapus(<span class="typ">Gudang</span> <span class="ptr">*g</span>, <span class="kwd">int</span> indexHapus) {
    <span class="cmt">// Loop dari titik hapus sampai ujung</span>
    <span class="kwd">for</span>(<span class="kwd">int</span> i = indexHapus; i < g->jum - 1; i++) {
        <span class="cmt">// Timpa data sekarang dgn data kanannya</span>
        g->daftar[i] = g->daftar[i+1];
    }
    g->jum--; <span class="cmt">// Barang berkurang 1</span>
}`,
            setup: () => {
                setVisual(`
                    <div style="display:flex; gap:10px; align-items:center;">
                        <div class="memory-block" style="opacity:0.3; border-style:dashed;">
                            <div class="memory-addr">Index 0</div>
                            <div>(Dihapus)</div>
                        </div>
                        <div style="font-size:2rem">‚¨ÖÔ∏è</div>
                        <div class="memory-block" style="border-color:var(--highlight)">
                            <div class="memory-addr">Index 1</div>
                            <div>Mouse</div>
                        </div>
                    </div>
                `);
                logTerm("Menimpa Index 0 dengan Index 1...\nMouse sekarang ada di Index 0.");
            }
        },
        {
            title: "8. Hasil Akhir (Main Menu)",
            desc: "Semua logika tadi dipanggil di `main.c`. Kita buat menu interaktif menggunakan `do-while` loop dan `switch case`.",
            code: `<span class="kwd">int</span> main() {
    <span class="kwd">int</span> menu;
    <span class="typ">Gudang</span> g = { .jum = 0 };
    
    <span class="kwd">do</span> {
        printf(<span class="str">"1. Cari  2. Tampil\n"</span>);
        printf(<span class="str">"3. Update 4. Tambah\n"</span>);
        printf(<span class="str">"5. Hapus  6. Keluar\n"</span>);
        scanf(<span class="str">"%d"</span>, &menu);
        
        <span class="kwd">if</span>(menu==4) tambah(&g);
        <span class="cmt">// dst...</span>
    } <span class="kwd">while</span>(menu != 6);
}`,
            setup: () => {
                setVisual(`
                    <div style="text-align:center;">
                        <div style="font-size:4rem;">üöÄ</div>
                        <h2 style="color:var(--accent);">Program Siap!</h2>
                        <p>Logic Manual + Modular + Pointer</p>
                    </div>
                `);
                document.getElementById('term-content').innerHTML = `
Hai, aku asisten pintar Gudang mu!
mau apa?
1. Cari Barang
2. Tampilkan Barang
3. Update Barang
4. Tambah Barang
5. Hapus Barang
6. Keluar
<span class="term-input">> _</span>`;
            }
        }
    ];

    // --- LOGIC ENGINE ---
    let currIdx = 0;

    function render() {
        const step = steps[currIdx];
        
        document.getElementById('step-num').innerText = currIdx + 1;
        document.getElementById('title').innerText = step.title;
        document.getElementById('desc').innerHTML = step.desc;
        document.getElementById('code-area').innerHTML = step.code;
        
        // Reset Terminal & Stage
        document.getElementById('term-content').innerHTML = "";
        step.setup();
    }

    function setVisual(html) {
        document.getElementById('visual-stage').innerHTML = html;
    }

    function logTerm(text) {
        const term = document.getElementById('term-content');
        term.innerText += text + "\n";
        term.scrollTop = term.scrollHeight;
    }

    function changeStep(n) {
        if (currIdx + n >= 0 && currIdx + n < steps.length) {
            currIdx += n;
            render();
        }
    }

    // Start
    render();

</script>
</body>
</html>