<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visualisasi C: Deep Dive</title>
    <style>
        :root {
            --bg: #0f172a;
            --panel: #1e293b;
            --text: #e2e8f0;
            --accent: #3b82f6;
            --yellow: #f59e0b;
            --red: #ef4444;
            --green: #10b981;
        }

        body {
            font-family: 'Segoe UI', sans-serif;
            background: var(--bg);
            color: var(--text);
            margin: 0;
            display: flex;
            height: 100vh;
            overflow: hidden;
        }

        /* KIRI: MATERI */
        .left {
            width: 35%;
            background: var(--panel);
            border-right: 1px solid #334155;
            display: flex;
            flex-direction: column;
            padding: 20px;
            overflow-y: auto;
        }

        h2 { color: var(--accent); margin-top: 0; font-size: 1.4rem; }
        p { line-height: 1.6; font-size: 0.95rem; color: #cbd5e1; }
        
        .code-block {
            background: #000;
            padding: 15px;
            border-radius: 6px;
            font-family: 'Consolas', monospace;
            font-size: 0.85rem;
            color: #d4d4d4;
            border-left: 3px solid var(--yellow);
            white-space: pre-wrap;
            margin: 15px 0;
        }
        
        /* Syntax Colors */
        .k { color: #569cd6; font-weight: bold; } /* keyword */
        .t { color: #4ec9b0; } /* type */
        .s { color: #ce9178; } /* string */
        .c { color: #6a9955; font-style: italic; } /* comment */
        .f { color: #dcdcaa; } /* function */

        .nav {
            margin-top: auto;
            display: flex;
            gap: 10px;
            padding-top: 20px;
        }
        button {
            flex: 1; padding: 10px; border: none; border-radius: 4px;
            font-weight: bold; cursor: pointer; transition: 0.2s;
        }
        .next { background: var(--accent); color: white; }
        .prev { background: #334155; color: white; }

        /* KANAN: VISUALISASI */
        .right {
            width: 65%;
            position: relative;
            background-image: radial-gradient(#334155 1px, transparent 1px);
            background-size: 20px 20px;
            display: flex;
            flex-direction: column;
        }

        .stage {
            flex: 1;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .terminal {
            height: 150px;
            background: #111;
            border-top: 2px solid #333;
            padding: 15px;
            font-family: 'Consolas', monospace;
            color: var(--green);
            overflow-y: auto;
            font-size: 0.9rem;
        }

        /* --- VISUAL ELEMENTS --- */
        .box {
            padding: 10px 20px;
            background: var(--panel);
            border: 2px solid #555;
            border-radius: 6px;
            position: absolute;
            text-align: center;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            transition: all 0.5s;
        }
        .label {
            font-size: 0.7rem; color: #999; margin-bottom: 5px; text-transform: uppercase;
        }
        .val { font-size: 1.1rem; }

        /* Animation Classes */
        .highlight { border-color: var(--yellow) !important; box-shadow: 0 0 15px var(--yellow); }
        .ghost { opacity: 0.4; border-style: dashed; }
        
        .arrow {
            position: absolute; height: 2px; background: var(--yellow);
            transform-origin: 0 50%;
        }
    </style>
</head>
<body>

    <div class="left">
        <div style="font-size:0.8rem; color:#666; margin-bottom:5px;">SLIDE <span id="s-num">1</span> / <span id="s-total">20</span></div>
        <h2 id="title">Judul</h2>
        <div id="desc">Deskripsi</div>
        <div id="code" class="code-block"></div>
        <div class="nav">
            <button class="prev" onclick="move(-1)">Back</button>
            <button class="next" onclick="move(1)">Next</button>
        </div>
    </div>

    <div class="right">
        <div class="stage" id="stage"></div>
        <div class="terminal" id="term">>_</div>
    </div>

<script>
    const slides = [
        // --- BAGIAN 1: DATA BERANTAKAN VS STRUCT ---
        {
            t: "1. Masalah: Variabel Biasa",
            d: "Bayangkan kita punya gudang. Kalau pakai variabel biasa, data nama, harga, dan stok itu <b>terpisah-pisah</b> (mencar).<br>Ini bahaya! Bisa saja variabel 'Harga' tertukar dengan barang lain.",
            c: `<span class="k">char</span> nama1[] = <span class="s">"Buku"</span>;
<span class="k">int</span> harga1 = 5000;
<span class="k">int</span> stok1 = 10;

<span class="k">char</span> nama2[] = <span class="s">"Pena"</span>;
<span class="k">int</span> harga2 = 2000;
<span class="c">// Pusing kan ngaturnya?</span>`,
            f: () => {
                draw(`
                    <div class="box" style="top:20%; left:20%">Buku</div>
                    <div class="box" style="top:30%; left:60%">Rp 5000</div>
                    <div class="box" style="top:60%; left:30%">Stok: 10</div>
                    <div class="box" style="top:10%; left:80%; border-color:red">Pena</div>
                    <div class="box" style="top:70%; left:70%; border-color:red">Rp 2000</div>
                    <div style="position:absolute; bottom:10%; color:#aaa;">Data berserakan di memori (Rawan Error)</div>
                `);
                log("Memori: Variabel dialokasikan secara acak.");
            }
        },
        {
            t: "2. Solusi: Struct (Pengelompokan)",
            d: "Struct itu seperti <b>Kardus</b>. Kita ambil data yang berserakan tadi, lalu kita masukkan ke dalam satu wadah.<br>Sekarang, kemana pun 'Buku' pergi, Harga dan Stoknya pasti ikut.",
            c: `<span class="k">typedef struct</span> {
    <span class="k">char</span> nama[50];
    <span class="k">int</span> harga, stok;
} <span class="t">Barang</span>;`,
            f: () => {
                draw(`
                    <div class="box" style="width:200px; height:150px; border-color:var(--accent);">
                        <div class="label" style="background:var(--accent); color:white; padding:2px;">STRUCT BARANG</div>
                        <div style="margin-top:10px; border-bottom:1px solid #444">Nama: Buku</div>
                        <div style="margin-top:10px; border-bottom:1px solid #444">Harga: 5000</div>
                        <div style="margin-top:10px;">Stok: 10</div>
                    </div>
                    <div style="position:absolute; bottom:10%; color:#aaa;">Data terbungkus rapi dalam satu blok memori</div>
                `);
                log("Struct didefinisikan. Data sekarang terstruktur.");
            }
        },
        
        // --- BAGIAN 2: POINTER (PASS BY VALUE vs REFERENCE) ---
        {
            t: "3. Fungsi Biasa (Tanpa Pointer)",
            d: "Apa yang terjadi kalau kita kirim data ke fungsi <b>TANPA</b> pointer? <br>Komputer akan melakukan <b>FOTOKOPI</b> (Salin).<br>Fungsi hanya mengubah kertas fotokopian, data asli di gudang TIDAK BERUBAH.",
            c: `<span class="k">void</span> ubahStok(<span class="t">Barang</span> b) {
    b.stok = 99; <span class="c">// Cuma ubah fotokopian</span>
}

<span class="k">int</span> main() {
    <span class="t">Barang</span> asli = {<span class="s">"Buku"</span>, 5000, 10};
    ubahStok(asli); 
    <span class="c">// Stok 'asli' TETAP 10!</span>
}`,
            f: () => {
                draw(`
                    <div class="box" style="left:20%; border-color:white;">
                        <div class="label">MAIN (ASLI)</div>
                        <div>Stok: 10</div>
                    </div>
                    <div style="position:absolute; font-size:2rem; color:#666">‚ûî COPY ‚ûî</div>
                    <div class="box" style="left:60%; border-color:gray; border-style:dashed;">
                        <div class="label">FUNGSI (COPY)</div>
                        <div style="color:var(--yellow)">Stok: 99</div>
                    </div>
                    <div style="position:absolute; bottom:20%; color:red;">Data asli tidak berubah!</div>
                `);
                log("Pass by Value: Data diduplikasi. Memboroskan memori.");
            }
        },
        {
            t: "4. Fungsi dengan Pointer (Pass by Reference)",
            d: "Solusinya: Pakai <b>Pointer (*)</b>. Kita tidak kirim fotokopi, tapi kita kirim <b>ALAMAT LOKASI</b> data asli.<br>Fungsi jadi tahu letak data asli dan bisa mengubahnya langsung.",
            c: `<span class="k">void</span> ubahStok(<span class="t">Barang</span> <span class="k">*b</span>) {
    b->stok = 99; <span class="c">// Akses alamat, ubah isinya</span>
}

<span class="k">int</span> main() {
    ubahStok(<span class="k">&</span>asli); <span class="c">// Kirim Alamat (&)</span>
    <span class="c">// Stok 'asli' BERUBAH JADI 99!</span>
}`,
            f: () => {
                draw(`
                    <div class="box" id="real-data" style="left:20%; border-color:var(--green);">
                        <div class="label">MAIN (ASLI)</div>
                        <div id="stok-val">Stok: 10</div>
                    </div>
                    <div class="box" style="left:60%; border-color:var(--yellow);">
                        <div class="label">POINTER *b</div>
                        <div style="font-size:0.8rem">Alamat: 0xFA1</div>
                    </div>
                    <svg style="position:absolute; width:100%; height:100%; pointer-events:none;">
                        <line x1="60%" y1="50%" x2="30%" y2="50%" stroke="yellow" stroke-width="4" marker-end="url(#arrow)" />
                        <defs><marker id="arrow" markerWidth="10" markerHeight="10" refX="0" refY="3" orient="auto"><path d="M0,0 L0,6 L9,3 z" fill="yellow" /></marker></defs>
                    </svg>
                `);
                setTimeout(() => {
                    document.getElementById('stok-val').innerText = "Stok: 99";
                    document.getElementById('stok-val').style.color = "#10b981";
                    document.getElementById('real-data').classList.add('highlight');
                    log("Pointer mengakses alamat asli -> Data berubah jadi 99.");
                }, 1500);
            }
        },

        // --- BAGIAN 3: ARRAY & GUDANG ---
        {
            t: "5. Membuat Gudang (Array of Struct)",
            d: "Gudang itu isinya banyak barang. Kita buat struct baru `Inventaris` yang punya Rak (Array).",
            c: `<span class="k">typedef struct</span> {
    <span class="t">Barang</span> daftar[100]; <span class="c">// Rak 100 Slot</span>
    <span class="k">int</span> jum;           <span class="c">// Hitung isi</span>
} <span class="t">Inventaris</span>;`,
            f: () => {
                draw(`
                    <div style="display:flex; gap:10px;">
                        <div class="box" style="position:relative; height:100px;">Rak 0<br><small>(Kosong)</small></div>
                        <div class="box" style="position:relative; height:100px;">Rak 1<br><small>(Kosong)</small></div>
                        <div class="box" style="position:relative; height:100px;">Rak 2<br><small>(Kosong)</small></div>
                        <div class="box" style="position:relative; height:100px; border-style:dashed;">...</div>
                    </div>
                    <div style="margin-top:150px; color:var(--yellow)">jum = 0</div>
                `);
                log("Memori dialokasikan untuk 100 barang.");
            }
        },

        // --- BAGIAN 4: MANUAL STRING HANDLING ---
        {
            t: "6. Tantangan: String Manual",
            d: "Kita dilarang pakai `strcpy`. Komputer itu bodoh, dia tidak bisa mindahin kata 'BUKU' sekaligus. Dia harus mindahin huruf demi huruf.",
            c: `<span class="c">// Logika Copy Manual</span>
<span class="k">int</span> i = 0;
<span class="k">while</span>(asal[i] != <span class="s">'\\0'</span>) {
    tujuan[i] = asal[i];
    i++;
}
tujuan[i] = <span class="s">'\\0'</span>;`,
            f: () => {
                draw(`
                    <div style="display:flex; flex-direction:column; gap:20px; align-items:center;">
                        <div style="display:flex; gap:5px;" id="src"></div>
                        <div style="font-size:2rem">‚¨áÔ∏è</div>
                        <div style="display:flex; gap:5px;" id="dest"></div>
                    </div>
                `);
                
                const w = "BUKU";
                const src = document.getElementById('src');
                const dest = document.getElementById('dest');
                
                // Setup visual
                for(let c of w) src.innerHTML += `<div class="box" style="position:static; padding:5px 10px;">${c}</div>`;
                for(let i=0; i<w.length; i++) dest.innerHTML += `<div class="box" id="d${i}" style="position:static; padding:5px 10px; border-style:dashed;"> </div>`;

                // Animation
                let idx = 0;
                let iv = setInterval(() => {
                    if(idx >= w.length) { clearInterval(iv); log("Selesai salin string."); return; }
                    document.getElementById(`d${idx}`).innerText = w[idx];
                    document.getElementById(`d${idx}`).style.borderStyle = "solid";
                    document.getElementById(`d${idx}`).style.borderColor = "var(--green)";
                    log(`Menyalin huruf '${w[idx]}' ke index ${idx}`);
                    idx++;
                }, 800);
            }
        },

        // --- BAGIAN 5: TAMBAH BARANG ---
        {
            t: "7. Fitur: Tambah Barang",
            d: "Gabungkan konsep tadi. Kita pakai Pointer ke Gudang, lalu Salin String Manual ke dalam Rak Array.",
            c: `<span class="k">void</span> tambah(<span class="t">Inventaris</span> *g) {
    <span class="c">// 1. Input User</span>
    <span class="k">char</span> namaTmp[50];
    scanf(<span class="s">"%s"</span>, namaTmp);
    
    <span class="c">// 2. Salin ke Array Gudang (Manual)</span>
    salinString(g->daftar[g->jum].nama, namaTmp);
    
    <span class="c">// 3. Geser Counter</span>
    g->jum++;
}`,
            f: () => {
                draw(`
                    <div class="box" style="left:10%; border-color:cyan">User Input:<br>"RAM"</div>
                    <div style="position:absolute; font-size:2rem;">‚ûî</div>
                    <div class="box" style="left:50%; border-color:var(--green)">
                        <div class="label">GUDANG ASLI (Rak 0)</div>
                        <div id="isi-rak" style="color:#666">KOSONG</div>
                    </div>
                `);
                setTimeout(() => {
                    document.getElementById('isi-rak').innerHTML = "Nama: RAM<br>Index: 0";
                    document.getElementById('isi-rak').style.color = "white";
                    log("Data tersimpan di Gudang Asli via Pointer.");
                }, 1000);
            }
        },

        // --- BAGIAN 6: HAPUS BARANG ---
        {
            t: "8. Logika Hapus (Geser Array)",
            d: "Hapus itu sulit. Kita tidak boleh meninggalkan lubang kosong. <br>Jika index 0 dihapus, index 1 harus digeser ke kiri menimpa index 0.",
            c: `<span class="k">void</span> hapus(<span class="t">Inventaris</span> *g, <span class="k">int</span> idx) {
    <span class="k">for</span>(<span class="k">int</span> i = idx; i < g->jum - 1; i++) {
        <span class="c">// Timpa kiri dengan kanan</span>
        g->daftar[i] = g->daftar[i+1];
    }
    g->jum--;
}`,
            f: () => {
                draw(`
                    <div style="display:flex; gap:20px;">
                        <div class="box" style="position:relative; border-color:red; opacity:0.5;">A (Hapus)</div>
                        <div style="font-size:2rem">‚¨ÖÔ∏è</div>
                        <div class="box" id="b-item" style="position:relative; border-color:var(--green)">B (Geser)</div>
                        <div class="box" style="position:relative;">C</div>
                    </div>
                `);
                
                setTimeout(() => {
                    const b = document.getElementById('b-item');
                    b.style.transform = "translateX(-100px)";
                    log("Item B bergeser menimpa Item A.");
                }, 1000);
            }
        },
        
        // --- BAGIAN 7: MODULAR ---
        {
            t: "9. Modular: Struktur Folder",
            d: "Jangan tumpuk kode di satu file! Kita pisah jadi 3 file agar rapi dan profesional.",
            c: `Project/
‚îú‚îÄ‚îÄ header.h  (Kamus Data)
‚îú‚îÄ‚îÄ logika.c  (Mesin/Otak)
‚îî‚îÄ‚îÄ main.c    (Tampilan UI)`,
            f: () => {
                draw(`
                    <div class="box" style="left:10%; height:120px; width:100px; border-color:var(--yellow)">Header.h</div>
                    <div class="box" style="left:40%; height:120px; width:100px; border-color:var(--accent)">Logika.c</div>
                    <div class="box" style="left:70%; height:120px; width:100px; border-color:var(--green)">Main.c</div>
                `);
                log("File sistem terstruktur.");
            }
        },
        
        {
            t: "10. File 1: header.h",
            d: "Isinya cuma definisi Struct dan daftar nama fungsi. Tidak ada kode logika di sini.",
            c: `<span class="k">typedef struct</span> { ... } <span class="t">Barang</span>;
<span class="k">void</span> tambah();
<span class="k">void</span> hapus();
<span class="c">// Cuma janji, isinya nanti.</span>`,
            f: () => {
                log("Header dimuat.");
            }
        },
        {
            t: "11. File 2: logika.c",
            d: "Di sini tempat kita menulis semua kode rumit tadi (Pointer, Loop Salin, Loop Geser).",
            c: `<span class="k">#include</span> "header.h"
<span class="k">void</span> tambah() { ... }
<span class="k">void</span> hapus() { ... }`,
            f: () => {
                log("Logika dimuat.");
            }
        },
        {
            t: "12. File 3: main.c",
            d: "Ini wajah program kita. Isinya cuma Menu Pilihan.",
            c: `<span class="k">int</span> main() {
   <span class="c">// Tampilkan Menu...</span>
   scanf(<span class="s">"%d"</span>, &pilihan);
   <span class="k">if</span>(pilihan == 1) tambah();
}`,
            f: () => {
                log("Main dimuat.");
            }
        },

        // --- BAGIAN 8: HASIL AKHIR ---
        {
            t: "13. Demo Program: Start",
            d: "Mari kita jalankan programnya. Tampilan awal akan seperti ini.",
            c: `<span class="c">// Output Terminal</span>`,
            f: () => {
                draw(`<div style="font-size:3rem;">üöÄ</div>`);
                term("Hai, aku asisten pintar Gudang mu!\n1. Cari Barang\n2. Tampilkan Barang\n3. Tambah Barang\n4. Hapus Barang\n5. Keluar\n> _");
            }
        },
        {
            t: "14. Demo: Tambah Barang",
            d: "User memilih menu 3.",
            c: `Menu: 3
Nama: Laptop
Harga: 5000000
Stok: 5`,
            f: () => {
                term("> 3\nMasukkan Nama: Laptop\nMasukkan Harga: 5000000\nMasukkan Stok: 5\n[INFO] Laptop berhasil ditambahkan!");
            }
        },
        {
            t: "15. Demo: Tambah Lagi",
            d: "Kita tambah satu barang lagi.",
            c: `Menu: 3
Nama: Mouse
Harga: 150000
Stok: 50`,
            f: () => {
                term("> 3\nNama: Mouse\nHarga: 150000\nStok: 50\n[INFO] Mouse berhasil ditambahkan!");
            }
        },
        {
            t: "16. Demo: Tampilkan Barang",
            d: "User pilih menu 2 untuk melihat isi gudang (Looping Array).",
            c: `Menu: 2`,
            f: () => {
                term("> 2\n=== ISI GUDANG ===\n1. Laptop | Rp 5000000 | Stok: 5\n2. Mouse | Rp 150000 | Stok: 50");
            }
        },
        {
            t: "17. Demo: Cari Barang",
            d: "User mencari 'Mouse' (Looping Cek String Manual).",
            c: `Menu: 1
Cari: Mouse`,
            f: () => {
                term("> 1\nCari nama: Mouse\n[DITEMUKAN] Mouse ada di index ke-2\nHarga: 150000");
            }
        },
        {
            t: "18. Demo: Hapus Barang",
            d: "User menghapus Laptop (Shift Array).",
            c: `Menu: 4
Hapus Index: 1`,
            f: () => {
                term("> 4\nHapus nomor urut: 1\n[INFO] Laptop dihapus.\n[INFO] Data dirapikan (Mouse geser ke nomor 1).");
            }
        },
        {
            t: "19. Demo: Cek Lagi",
            d: "Pastikan Laptop hilang dan Mouse naik ke posisi 1.",
            c: `Menu: 2`,
            f: () => {
                term("> 2\n=== ISI GUDANG ===\n1. Mouse | Rp 150000 | Stok: 50");
            }
        },
        {
            t: "20. Selesai",
            d: "Kamu berhasil membuat program Inventaris Kompleks dengan Pointer, Struct, dan Modular!",
            c: `// Program Keluar`,
            f: () => {
                draw(`<h1 style="color:var(--green)">TAMAT üéâ</h1>`);
                term("Terima kasih telah menggunakan asisten gudang.");
            }
        }
    ];

    // ENGINE
    let idx = 0;
    function render() {
        const s = slides[idx];
        document.getElementById('s-num').innerText = idx + 1;
        document.getElementById('title').innerText = s.t;
        document.getElementById('desc').innerHTML = s.d;
        document.getElementById('code').innerHTML = s.c;
        document.getElementById('stage').innerHTML = ""; // Clear stage
        s.f();
    }

    function draw(html) { document.getElementById('stage').innerHTML = html; }
    function log(txt) { 
        const t = document.getElementById('term');
        t.innerText += "\n[SYS] " + txt; 
        t.scrollTop = t.scrollHeight;
    }
    function term(txt) {
        const t = document.getElementById('term');
        t.innerText = txt;
    }

    function move(n) {
        if(idx+n >= 0 && idx+n < slides.length) {
            idx += n;
            render();
        }
    }

    render();
</script>
</body>
</html>